<% layout("/layouts/boilerplate") %>

<div class="container mt-4">
    <h2>My Bookings</h2>
    
    <% if(bookings.length === 0) { %>
        <div class="alert alert-info">
            You don't have any bookings yet.
        </div>
    <% } else { %>
        <div class="row">
            <% bookings.forEach(booking => { 
                console.log(booking);
                
                
                %>
                <div class="col-md-6 mb-4">
                    <div class="card">
                        <div class="card-body">
                             <h5 class="card-title"><%= booking.listing?.title %></h5>
                            <p class="card-text">
                                <strong>Check-in:</strong> <%= booking.checkIn.toDateString() %><br>
                                <strong>Check-out:</strong> <%= booking.checkOut.toDateString() %><br>
                                <strong>Guests:</strong> <%= booking.guests %><br>
                                <strong>Total Price:</strong> â‚¹<%= booking.totalPrice.toLocaleString("en-IN") %>
                            </p>
                            
                            <form action="/listings/<%= booking.listing?._id %>/bookings/<%= booking._id %>?_method=DELETE" 
                                method="POST">
                                <button type="submit" class="btn btn-danger">Cancel Booking</button>
                            </form>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    <% } %>
</div>